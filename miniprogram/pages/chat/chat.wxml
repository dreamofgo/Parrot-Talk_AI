<!--pages/chat/chat.wxml-->
<view class="chat-container">
  <scroll-view class="msg-list" scroll-y scroll-into-view="{{lastId}}" scroll-with-animation>
    <block wx:for="{{messages}}" wx:key="index">
      <view class="msg-item {{item.role === 'user' ? 'user-msg' : 'bot-msg'}}" id="msg-{{index}}">
        <view class="avatar">
          <image src="../../images/{{item.role === 'user' ? 'user-avatar.png' : 'bot-avatar.png'}}" />
        </view>
        <view class="msg-content">
          <text>{{item.content}}</text>
        </view>
      </view>
    </block>
  </scroll-view>
  
  <view class="input-area">
    <view class="input-box">
      <input type="text" value="{{inputValue}}" bindinput="onInput" placeholder="请输入消息..." />
      <view class="btn-group">
        <button class="voice-btn" bindtouchstart="startRecord" bindtouchend="stopRecord">
          <image src="../../images/voice.png" />
        </button>
        <button class="send-btn" bindtap="sendMessage">发送</button>
      </view>
    </view>
  </view>
</view>